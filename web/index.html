<!-- Homepage. Shows a list of bells and gives us the option to enable or disable bells -->
<% include includes/header.html %>
  <% if(items["_all"].Enabled == true) { %>
    <h1>Currently loaded bells</h1>
    <table border=1 cellpadding=10 cellspacing=0 class="list">
      <tr cellpadding="5" class="colour">
        <th>&nbsp;</th>
        <!-- <th><a title="The unique ID of this bell">ID</a></th> -->
        <th>
          <abbr title="Short name for this bell">Name</abbr>
        </th>
        <th>
          <abbr title="A description of this bell">Description</abbr>
        </th>
        <th>
          <abbr title="When this bell will next ring">Next Run Time</abbr>
        </th>
        <th>
          <abbr title="The sound(s) to play when it rings">Sound</abbr>
        </th>
        <th>
          <abbr title="Will this send an email when triggered?">Email on Trigger</abbr>
        </th>
        <th>
          <abbr title="Will this send an email when enabled / disabled, edited or deleted?">Email on change</abbr>
        </th>
        <th>
          <abbr title="Is this bell locked from the web UI (to prevent unauthorized changes)?">Locked</a>
        </th>
        <th>Actions</th>
      </tr>
      <% Object.keys(items).forEach(function(item){ %>
        <% if(item === "_all") { return } %>
          <% if (items[item].Enabled === false) { %>
            <tr class="inactive">
              <% } else { %>
                <tr class="active">
                  <% } %>
                    <% if (nextJob["time"] == items[item].Time) { %>
                      <td class="next"><i class="fa fa-chevron-right"></i> <a title="This bell will play next">NEXT</a></td>
                      <% } else { %>
                        <td>&nbsp;</td>
                        <% } %>
                          <!-- <td><%= item %></td> -->
                          <td>
                            <%= items[item].Name %>
                          </td>
                          <td>
                            <%= items[item].Description %>
                          </td>
                          <td>
                            <a href="#" title="<%= items[item].Time %>">
                              <%= cron(items[item].Time)["calendar"] %>
                            </a>
                          </td>
                          <td>
                            <%= items[item].File %>
                          </td>
                          <td>
                            <%= items[item].Mail.Trigger.Enabled %>
                          </td>
                          <td>
                            <%= items[item].Mail.Change.Enabled %>
                          </td>
                          <td>
                            <%= items[item].Locked %>
                          </td>
                          <td>
                            <a href="toggle.html?id=<%= item %>&state=<% if (items[item].Enabled === false) { %>true<% } else { %>false<% } %>">
                              <% if (items[item].Enabled === false) { %>Enable
                                <% } else { %>Disable
                                  <% } %>
                            </a>
                          </td>
                </tr>
                <% }); %>
    </table>
    <p>Legend</p>
    <table border=1 cellpadding=10 cellspacing=0 class="list">
      <tr>
        <td class="active">Bell is enabled</td>
        <td class="inactive">Bell is disabled</td>
        <td class="next">This bell will ring next</td>
      </tr>
    </table>
    <% } else { %>
      <h2>All bells are currently disabled. <a href="toggle.html?id=_all&state=true">Click here to enable them again</a></h2>
      <% } %>
        <% include includes/footer.html %>
